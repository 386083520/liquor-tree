{"version":3,"file":"liquor-tree.umd.js","sources":["../src/components/TreeNode.vue","../src/lib/Node.js","../src/utils/uuidV4.js","../src/utils/objectToNode.js","../src/utils/stack.js","../src/utils/treeParser.js","../src/utils/recurse.js","../src/lib/Tree.js","../src/utils/keyboardNavigation.js","../src/mixins/TreeMixin.js","../src/components/TreeRoot.vue","../src/main.js"],"sourcesContent":["<template>\n  <li class=\"tree-node\" :class=\"nodeClass\">\n    <i class=\"tree-arrow\" @click=\"toggleExpand\"></i>\n    <i class=\"tree-checkbox\" v-if=\"options.checkbox\" @click=\"check\"></i>\n\n    <a\n      href=\"javascript:void(0)\"\n      class=\"tree-anchor\"\n      tabindex=\"1\"\n      ref=\"anchor\"\n      @focus=\"onNodeFocus\"\n\n      @click=\"select\">\n        <node-content :node=\"node\" />\n    </a>\n\n    <transition name=\"l-fade\">\n      <ul\n        v-if=\"hasChildren() && state.expanded\"\n        class=\"tree-children\">\n          <node\n            v-for=\"(child, i) in node.children\"\n            v-if=\"child.visible()\"\n\n            :key=\"child.id\"\n            :node=\"child\"\n            :options=\"options\"\n            >\n          </node>\n      </ul>\n    </transition>\n  </li>\n</template>\n\n<script>\n  const TreeNode = {\n    name: 'Node',\n    inject: ['tree'],\n    props: ['node', 'options'],\n\n    components: {\n      NodeContent: {\n        props: ['node'],\n        render(h) {\n          const node = this.node\n          const vm = this.node.tree.vm\n\n          return vm.$scopedSlots.default\n            ? vm.$scopedSlots.default({ node: this.node })\n            : h('span', {\n              domProps: {\n                innerHTML: node.text\n              }\n            })\n        }\n      }\n    },\n\n    data() {\n      this.node.vm = this\n\n      return {\n        state: this.node.states\n      }\n    },\n\n    computed: {\n      nodeClass() {\n        let state = this.state\n        let hasChildren = this.hasChildren()\n        let classes = {\n          'tree--has-child': hasChildren,\n          'tree--expanded': hasChildren && state.expanded,\n          'tree--selected': state.selected,\n          'tree--disabled': state.disabled\n        }\n\n        if (this.options.checkbox) {\n          classes['tree--checked'] = state.checked\n          classes['tree--indeterminate'] = state.indeterminate\n        }\n\n        return classes\n      }\n    },\n\n\n    methods: {\n      onNodeFocus() {\n        this.tree.activeElement = this.node\n      },\n\n      focus() {\n        this.$refs.anchor.focus()\n      },\n\n      check() {\n        if (this.node.disabled()) {\n          return\n        }\n\n        if (this.node.checked()) {\n          this.tree.uncheck(this.node)\n        } else {\n          this.tree.check(this.node)\n        }\n      },\n\n      select(evnt) {\n        if (this.node.disabled()) {\n          return\n        }\n\n        if (!this.options.parentSelect && this.hasChildren()) {\n          return this.toggleExpand()\n        }\n\n        if (!this.node.selected()) {\n          this.tree.select(\n            this.node, evnt.ctrlKey\n          )\n        } else {\n          if (evnt.ctrlKey) {\n            this.tree.unselect(this.node)\n          } else {\n            let selectedLength = this.tree.selectedNodes.length\n\n            this.tree.unselectAll()\n\n            if (this.options.multiple && selectedLength > 1) {\n              this.tree.select(this.node)\n            }\n          }\n        }\n      },\n\n      toggleExpand() {\n        if (this.node.disabled()) {\n          return\n        }\n\n        if (this.hasChildren()) {\n          this.tree.toggleExpand(\n            this.node\n          )\n        }\n      },\n\n      hasChildren() {\n        return this.node.hasChildren()\n      }\n    }\n  }\n\n  export default TreeNode\n</script>\n\n<style>\n  .tree-node {\n    white-space: nowrap;\n  }\n\n  .tree-arrow {\n    display: inline-block;\n    height: 30px;\n    cursor: pointer;\n    margin-left: 30px;\n    width: 0;\n  }\n\n  .tree-checkbox {\n    display: inline-block;\n    height: 30px;\n    width: 30px;\n    cursor: pointer;\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAABaCAYAAACv+ebYAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAejAAAHowEwL7LFAAAAB3RJTUUH4gIDCy4HZhufyQAAAZVJREFUaN7t2U8og3EYB/DvO3pdRKR2UIiViNzsyE4yHCQiSSIHkQOSFuZPSqklDliSkhknBw4UhYPiJgebNaQtorc5rHfz6nVz0cqYdzt8n+PvOXz69TxPPfUI/pdXFXEIHeIUhAkTTmzY73/G9bVbW1iSApiZXYL3/lE7OBiUMTtnR2lJIWrNJm1gRfmAbX4NmRnp6Oxo1KbGqqpi2e6ALIfQ39eOpCSdNvCWcw8ezwOGBrqQkiLGpqvtq9t4V5SI+YPDM5ycXmB4qBtpaamxGyef7wmT04uQpMC33MXlFZw7+xgc6IRenxXbObaM9CAvNxuWMRtuXN6vd5fbi6UVB3p72lCQnxN1eYSfbiBHx+fY2NxFa0sdiosMsE4tormpBqZK46/6Qohm9XG57zC/sA5ZDsFcXYGG+qpfN6QQ7c4lSW9wub0wlpf9aRIELnuECRMmTJgwYcKECRMmTJgwYcKECRMmTJgwYcL/EMmRElMTVnhubyGKIhDtnUYAwuEwCgwGjI5bE+vHvDsRJkyYMOGI8Ql68IQ9vE0/3AAAAABJRU5ErkJggg==');\n    background-repeat: no-repeat;\n    background-position-x: center;\n    background-position-y: -30px;\n  }\n\n  .tree-anchor {\n    outline-color: #eee;\n    outline-width: 1px;\n    display: inline-block;\n    text-decoration: none;\n    color: #343434;\n    vertical-align: top;\n    height: 24px;\n    line-height: 24px;\n    padding: 3px 6px;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n\n  .tree-anchor:hover {\n    background-color: #fafafa;\n  }\n\n  .tree--selected > .tree-anchor {\n    background: #f0f0f0;\n  }\n\n  .tree--checked > .tree-checkbox {\n    background-position-y: 0;\n  }\n\n  .tree--indeterminate > .tree-checkbox {\n    background-position-y: -60px;\n  }\n\n  .tree--checked > .tree-anchor {\n    background: #dadada;\n  }\n\n  .tree--has-child > .tree-arrow {\n    margin-left: 0;\n    width: 30px;\n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAQAAACROWYpAAAACXBIWXMAAA3XAAAN1wFCKJt4AAADGGlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBFTAyMHy7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BSMDVQYqg4jIKAUICxE+CDEESC4tKoMHJQODAIMCgwGDA0MAQyJDPcMChqMMbxjFGV0YSxlXMN5jEmMKYprAdIFZmDmSeSHzGxZLlg6WW6x6rK2s99gs2aaxfWMPZ9/NocTRxfGFM5HzApcj1xZuTe4FPFI8U3mFeCfxCfNN45fhXyygI7BD0FXwilCq0A/hXhEVkb2i4aJfxCaJG4lfkaiQlJM8JpUvLS19QqZMVl32llyfvIv8H4WtioVKekpvldeqFKiaqP5UO6jepRGqqaT5QeuA9iSdVF0rPUG9V/pHDBYY1hrFGNuayJsym740u2C+02KJ5QSrOutcmzjbQDtXe2sHY0cdJzVnJRcFV3k3BXdlD3VPXS8Tbxsfd99gvwT//ID6wIlBS4N3hVwMfRnOFCEXaRUVEV0RMzN2T9yDBLZE3aSw5IaUNak30zkyLDIzs+ZmX8xlz7PPryjYVPiuWLskq3RV2ZsK/cqSql01jLVedVPrHzbqNdU0n22VaytsP9op3VXUfbpXta+x/+5Em0mzJ/+dGj/t8AyNmf2zvs9JmHt6vvmCpYtEFrcu+bYsc/m9lSGrTq9xWbtvveWGbZtMNm/ZarJt+w6rnft3u+45uy9s/4ODOYd+Hmk/Jn58xUnrU+fOJJ/9dX7SRe1LR68kXv13fc5Nm1t379TfU75/4mHeY7En+59lvhB5efB1/lv5dxc+NH0y/fzq64Lv4T8Ffp360/rP8f9/AA0ADzT6lvFdAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAACCSURBVHja7JSxDkBQDEVPzYIVg/gAETaL//8NFonJKiRMwlAR78UgtOs9uU1vU1kwL4cffjcsrkTC3vecUxq8S+tFbSBnJNxMT1SnMFT0JKYw1AwEpjCUzASmMBR0xLrKKucHx7ZYmEVUFkeSMR3PU1eJ/gDFx6c9wqrq/56fgNcBAInl7e4ANk/XAAAAAElFTkSuQmCC');\n    background-repeat: no-repeat;\n    transition: transform .3s;\n  }\n\n  .tree--expanded > .tree-arrow {\n    transform: rotate(90deg);\n  }\n\n  .tree--disabled {\n    color: #fff;\n    background: #fff;\n    opacity: .6;\n    cursor: default;\n  }\n\n  .tree--disabled > .tree-anchor,\n  .tree--disabled > .tree-anchor span {\n    background: #fff;\n    cursor: default;\n  }\n\n  .tree--disabled > .tree-anchor:focus {\n    outline: none\n  }\n\n  .l-fade-enter-active, .l-fade-leave-active {\n    transition: opacity .3s, transform .3s;\n    transform: translateX(0);\n  }\n\n  .l-fade-enter, .l-fade-leave-to {\n    opacity: 0;\n    transform: translateX(-2em);\n  }\n</style>\n","\nexport default class Node {\n  constructor(tree, item) {\n    this.id = item.id\n    this.states = item.state\n\n    this.children = item.children || []\n    this.parent = item.parent || null\n\n    this._data = Object.assign({}, {\n      text: item.text\n    }, item.data || {})\n\n    if (!tree) {\n      throw new Error('Node must has a Tree context!')\n    }\n\n    this.tree = tree\n  }\n\n  $emit(evnt, ...args) {\n    this.tree.$emit(`node:${evnt}`, this, ...args)\n  }\n\n  get text() {\n    return this.data('text')\n  }\n\n  set text(text) {\n    let oldText = this.text\n\n    this.data('text', text)\n    this.tree.$emit('node:text:changed', text, oldText)\n  }\n\n  get depth() {\n    let depth = 0\n    let parent = this.parent\n\n    if (!parent) {\n      return depth\n    }\n\n    do {\n      depth++\n    } while(parent = parent.parent)\n\n    return depth\n  }\n\n  data(name, value) {\n    if (undefined === value) {\n      return this._data[name]\n    }\n\n    this._data[name] = value\n    return this\n  }\n\n  state(name, value) {\n    if (undefined === value) {\n      return this.states[name]\n    }\n\n    // TODO: check if it for example `selectable` state it should unselect node\n\n    this.states[name] = value\n\n    return this\n  }\n\n  recurseUp(fn, node = this) {\n    if (!node.parent) {\n      return\n    }\n\n    if (false !== fn(node.parent)) {\n      return this.recurseUp(fn, node.parent)\n    }\n  }\n\n  refreshIndeterminateState() {\n    this.state('indeterminate', false)\n\n    if (this.hasChildren()) {\n      let childrenCount = this.children.length\n      let checked = 0\n      let indeterminate = 0\n      let disabled = 0\n\n      this.children.forEach(child => {\n        if (child.checked()) {\n          checked++\n        }\n\n        if (child.disabled()) {\n          disabled++\n        }\n\n        if (child.indeterminate()) {\n          indeterminate++\n        }\n      })\n\n      if (checked == childrenCount - disabled) {\n        if (!this.checked()) {\n          this.check()\n        }\n      } else {\n        if (this.checked()) {\n          this.uncheck()\n        }\n      }\n\n      if (!this.checked()) {\n        this.state(\n          'indeterminate',\n          indeterminate > 0 || (checked > 0 && checked < childrenCount)\n        )\n      }\n    }\n\n    if (this.parent) {\n      this.parent.refreshIndeterminateState()\n    }\n  }\n\n\n  indeterminate() {\n    return this.state('indeterminate')\n  }\n\n\n\n  selectable() {\n    return this.state('selectable')\n  }\n\n  selected() {\n    return this.state('selected')\n  }\n\n  select() {\n    if (this.selected()) {\n      return this\n    }\n\n    this.state('selected', true)\n    this.$emit('selected')\n\n    return this\n  }\n\n  unselect() {\n    if (!this.selected()) {\n      return this\n    }\n\n    this.state('selected', false)\n    this.$emit('unselected')\n\n    return this\n  }\n\n\n\n  checked() {\n    return this.state('checked')\n  }\n\n  check() {\n    if (this.checked()) {\n      return this\n    }\n\n    this.state('checked', true)\n    this.$emit('checked')\n    this.refreshIndeterminateState()\n\n    return this\n  }\n\n  uncheck(ignoreIndeterminate) {\n    if (!this.checked()) {\n      return this\n    }\n\n    this.state('checked', false)\n    this.$emit('unchecked')\n    this.refreshIndeterminateState()\n\n    return this\n  }\n\n\n\n  show() {\n    if (this.visible()) {\n      return this\n    }\n\n    this.state('visible', true)\n    this.$emit('shown')\n\n    return this\n  }\n\n  hide() {\n    if (this.hidden()) {\n      return this\n    }\n\n    this.state('visible', false)\n    this.$emit('hidden')\n\n    return this\n  }\n\n  visible() {\n    return this.state('visible')\n  }\n\n  hidden() {\n    return !this.state('visible')\n  }\n\n\n\n  enable() {\n    if (this.enabled()) {\n      return this\n    }\n\n    this.tree.recurseDown(this, node => {\n      if (node.disabled()) {\n        node.state('disabled', false)\n        node.$emit('enabled')\n      }\n    })\n\n    return this\n  }\n\n  enabled() {\n    return !this.state('disabled')\n  }\n\n  disable() {\n    if (this.disabled()) {\n      return this\n    }\n\n    this.tree.recurseDown(this, node => {\n      if (node.enabled()) {\n        node.state('disabled', true)\n        node.$emit('disabled')\n      }\n    })\n\n    return this\n  }\n\n  disabled() {\n    return this.state('disabled')\n  }\n\n\n  expand() {\n    if (!this.hasChildren() || this.expanded()) {\n      return this\n    }\n\n    this.state('expanded', true)\n    this.$emit('expanded')\n\n    return this\n  }\n\n  expanded() {\n    return this.state('expanded')\n  }\n\n  collapse() {\n    if (!this.hasChildren() || this.collapsed()) {\n      return this\n    }\n\n    this.state('expanded', false)\n    this.$emit('collapsed')\n\n    return this\n  }\n\n  collapsed() {\n    return !this.state('expanded')\n  }\n\n  toggleExpand() {\n    return this._toggleOpenedState()\n  }\n\n  toggleCollapse() {\n    return this._toggleOpenedState()\n  }\n\n\n  _toggleOpenedState() {\n    if (this.expanded()) {\n      return this.collapse()\n    }\n\n    return this.expand()\n  }\n\n  index() {\n    return this.tree.index(this, verbose)\n  }\n\n\n  first() {\n    if (!this.hasChildren()) {\n      return null\n    }\n\n    return this.children[0]\n  }\n\n  last() {\n    if (!this.hasChildren()) {\n      return null\n    }\n\n    return this.children[this.children.length - 1]\n  }\n\n\n  next() {\n    return this.tree.nextNode(this)\n  }\n\n  prev() {\n    return this.tree.prevNode(this)\n  }\n\n\n  focus() {\n    if (this.vm) {\n      this.vm.focus()\n    }\n  }\n\n  remove() {\n    this.tree.removeNode(this)\n    this.$emit('removed')\n\n    return this\n  }\n\n\n  hasChildren() {\n    return this.children.length > 0\n  }\n\n  /**\n  * Sometimes it's no need to have a parent. It possible to have more than 1 parent\n  */\n  isRoot() {\n    return null === this.parent\n  }\n}\n","\r\n// it is not genuine GUIDs\r\n\r\nfunction s4() {\r\n  return Math.floor((1 + Math.random()) * 0x10000)\r\n    .toString(16)\r\n    .substring(1);\r\n}\r\n\r\nexport default function uuidV4() {\r\n  return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n    s4() + '-' + s4() + s4() + s4()\r\n}\r\n","import Node from '@/lib/Node'\nimport uuidV4 from '@/utils/uuidV4'\n\n/**\n* Default Node's states\n*/\nconst nodeStates = {\n  selected: false,\n  selectable: true,\n  checked: false,\n  expanded: false,\n  disabled: false,\n  visible: true,\n  indeterminate: false\n}\n\nfunction merge(state = {}) {\n  return Object.assign({}, nodeStates, state)\n}\n\nexport default function objectToNode(tree, obj) {\n  let node = null\n\n  if ('string' == typeof obj) {\n    node = new Node(tree, {\n      text: obj,\n      state: merge(),\n      id: uuidV4()\n    })\n  } else {\n    node = new Node(tree, obj)\n    node.states = merge(node.states)\n\n    if (!node.id) {\n      node.id = uuidV4()\n    }\n\n    if (node.children.length) {\n      node.children = node.children.map(child => {\n        child = objectToNode(tree, child)\n        child.parent = node\n\n        return child\n      })\n    }\n  }\n\n  return node\n}\n","\nexport class List extends Array {\n  constructor() {\n    super()\n  }\n\n  empty() {\n    this.length = 0\n\n    return this\n  }\n\n  add(...items) {\n    this.push(...items)\n\n    return this\n  }\n\n  remove(item) {\n    this.splice(\n      this.indexOf(item),\n      1\n    )\n\n    return this\n  }\n\n  removeAll(item) {\n    while(this.includes(item)) {\n      this.remove(item)\n    }\n\n    return this\n  }\n\n  top() {\n    return this[this.length - 1]\n  }\n}\n","import objectToNode from '@/utils/objectToNode'\n\n/**\n  Every Node has certain format:\n  {\n    id,           // Unique Node id. By default it generates using uuidV4\n    text,         // Node text\n    children,     // List of children. Each children has the same format\n    parent,       // Parent Node or null. The tree is able to have more than 1 root node\n    state,        // States of Node. Ex.: selected, checked and so on\n    data          // Any types of data. It is similar to `storage`.\n                  // Ex.: data: {myAwesomeProperty: 10}. To get this property you need: Node.data('myAwesomeProperty')\n  }\n*/\n\n\nlet defaultPropertyNames = {\n  id: 'id',\n  text: 'text',\n  children: 'children',\n  state: 'state',\n  data: 'data'\n}\n\n\nfunction convertNames(obj, names) {\n  return {\n    id: obj[names.id],\n    text: obj[names.text],\n    children: obj[names.children],\n    state: obj[names.state],\n    data: obj[names.data]\n  }\n}\n\n\nconst TreeParser = {\n  parse(data, tree, options = {}) {\n    if ('string' == typeof data) {\n      data = JSON.parse(data)\n    }\n\n    if (!Array.isArray(data)) {\n      data = [data]\n    }\n\n    let p = Object.assign(\n      {},\n      defaultPropertyNames,\n      options\n    )\n\n    let preparedItems = data.map(function converter(item) {\n      let convertedItem = convertNames(item, p)\n\n      if (convertedItem.children) {\n        convertedItem.children = convertedItem.children.map(converter)\n      }\n\n      return convertedItem\n    })\n\n    return preparedItems.map(item => objectToNode(tree,item))\n  }\n}\n\nexport { TreeParser }\n","\nexport function recurseDown(obj, fn) {\n  let res;\n\n  if (Array.isArray(obj)) {\n    return obj.map(node => recurseDown(node, fn))\n  }\n\n  res = fn(obj);\n\n  // Recurse children\n  if (res !== false && obj.hasChildren()) {\n      res = recurseDown(obj.children, fn);\n  }\n\n  return res;\n}\n","import objectToNode from '@/utils/objectToNode'\nimport Node from '@/lib/Node'\nimport { List } from '@/utils/stack'\n\nimport { TreeParser } from '@/utils/treeParser'\nimport { recurseDown } from '@/utils/recurse'\n\n\nexport default class Tree {\n  constructor(vm) {\n    this.vm = vm\n    this.options = vm.options\n\n    this.activeElement = null\n  }\n\n  $on(name, ...args) {\n    this.vm.$on(name, ...args)\n  }\n\n  $once(name, ...args) {\n    this.vm.$once(name, ...args)\n  }\n\n  $off(name, ...args) {\n    this.vm.$off(name, ...args)\n  }\n\n  $emit(name, ...args) {\n    this.vm.$emit(name, ...args)\n  }\n\n  setModel(model) {\n    this.model = model\n\n    /**\n    * VueJS transform properties to reactives when constructor is running\n    * And we lose List object (extended from Array)\n    */\n    this.selectedNodes = new List\n    this.checkedNodes = new List\n\n    recurseDown(model, node => {\n      node.tree = this\n\n      if (node.selected()) {\n        this.selectedNodes.add(node)\n      }\n\n      if (node.checked()) {\n        this.checkedNodes.add(node)\n\n        if (node.parent) {\n          node.parent.refreshIndeterminateState()\n        }\n      }\n    })\n\n    if (!this.options.multiple && this.selectedNodes.length) {\n      let top = this.selectedNodes.top()\n\n      this.selectedNodes.forEach(node => {\n        if (top !== node) {\n          node.state('selected', false)\n        }\n      })\n\n      this.selectedNodes\n        .empty()\n        .add(top)\n    }\n  }\n\n  recurseDown(node, fn) {\n    if (!fn && node) {\n      fn = node\n      node = this.model\n    }\n\n    if ('function' != typeof fn) {\n      new TypeError('Argument must be a function')\n    }\n\n    return recurseDown(node, fn)\n  }\n\n\n  select(node, extendList) {\n    if (node.selected() || !node.selectable()) {\n      return false\n    }\n\n    const treeNode = this.findNode(node)\n\n    if (!treeNode) {\n      return false\n    }\n\n\n    if (this.options.multiple && extendList) {\n      this.selectedNodes.add(treeNode)\n    } else {\n      this.selectedNodes.forEach(node => this.unselect(node))\n      this.selectedNodes\n        .empty()\n        .add(treeNode)\n    }\n\n    treeNode.select()\n\n    return true\n  }\n\n  selectAll() {\n    if (!this.options.multiple) {\n      return false\n    }\n\n    this.selectedNodes.empty()\n\n    this.recurseDown(node => {\n      this.selectedNodes.add(\n        node.select()\n      )\n    })\n\n    return true\n  }\n\n\n  unselect(node) {\n    if (!node.selected() || !node.selectable()) {\n      return false\n    }\n\n    node.unselect()\n\n    return true\n  }\n\n  unselectAll() {\n    this.selectedNodes.forEach(node => {\n      this.unselect(node)\n    })\n\n    this.selectedNodes.empty()\n\n    return true\n  }\n\n\n  check(node) {\n    if (node.checked()) {\n      return false\n    }\n\n    if (node.indeterminate()) {\n      return this.uncheck(node)\n    }\n\n    node.state('indeterminate', false)\n\n    if (node.hasChildren()) {\n      this.recurseDown(node, child => {\n        if (child.enabled()) {\n          if (!child.checked()) {\n            this.$emit(\n              'node:checked',\n              child.state('checked', true)\n            )\n\n            this.checkedNodes.add(child)\n          }\n        }\n      })\n    } else {\n      if (!node.checked() && node.enabled()) {\n        this.$emit(\n          'node:checked',\n          node.state('checked', true)\n        )\n\n        this.checkedNodes.add(node)\n      }\n    }\n\n    node.refreshIndeterminateState()\n  }\n\n  uncheck(node) {\n    if (!node.checked() && !node.indeterminate()) {\n      return false\n    }\n\n    node.state('indeterminate', false)\n\n    if (node.hasChildren()) {\n      this.recurseDown(node, child => {\n        child.state('indeterminate', false)\n\n        if (child.checked()) {\n          this.$emit(\n            'node:unchecked',\n            child.state('checked', false)\n          )\n        }\n\n        this.checkedNodes.remove(child)\n      })\n    } else {\n      if (node.checked()) {\n        this.$emit(\n          'node:unchecked',\n          node.state('checked', false)\n        )\n      }\n      this.checkedNodes.remove(node)\n    }\n\n    node.refreshIndeterminateState()\n  }\n\n\n  expand(node) {\n    if (node.expanded()) {\n      return false\n    }\n\n    node.expand()\n\n    return true\n  }\n\n  collapse(node) {\n    if (node.collapsed()) {\n      return false\n    }\n\n    node.collapse()\n\n    return true\n  }\n\n  toggleExpand(node) {\n    if (!node.hasChildren()) {\n      return false\n    }\n\n    node.toggleExpand()\n\n    return true\n  }\n\n  toggleCollapse(node) {\n    if (!node.hasChildren()) {\n      return false\n    }\n\n    node.toggleCollapse()\n\n    return true\n  }\n\n  addToModel(node, index = this.model.length) {\n    this.model.splice(index, 0, node)\n    this.recurseDown(node, n => {\n      n.tree = this\n    })\n  }\n\n\n  append(node) {\n    node = objectToNode(node)\n\n    this.addToModel(node)\n\n    return node\n  }\n\n  prepend(node) {\n    node = objectToNode(node)\n\n    this.addToModel(node, 0)\n\n    return node\n  }\n\n  addNode(node) {\n    const index = this.model.length\n\n    node = objectToNode(node)\n\n    this.model.splice(index, 0, node)\n    this.$emit('node:added', node)\n\n    return node\n  }\n\n  removeNode(node) {\n    if (!node.parent) {\n      this.model.splice(\n        this.model.indexOf(node),\n        1\n      )\n    } else {\n      node.parent.children.splice(\n        node.parent.children.indexOf(node),\n        1\n      )\n    }\n\n    this.selectedNodes.remove(node)\n    this.checkedNodes.remove(node)\n\n    return node\n  }\n\n  index(node, verbose) {\n    let target = node.parent\n\n    if (target) {\n      target = target.children\n    } else {\n      target = this.model\n    }\n\n    if (verbose) {\n      return {\n        index: target.indexOf(node),\n        target\n      }\n    }\n\n    return target.indexOf(node)\n  }\n\n\n  nextNode(node) {\n    let { target, index } = this.index(node, true)\n\n    return target[index + 1] || null\n  }\n\n\n  nextVisibleNode(node) {\n    if (node.hasChildren() && node.expanded()) {\n      return node.first()\n    }\n\n    let nextNode = this.nextNode(node)\n\n    if (!nextNode && node.parent) {\n      return node.parent.next()\n    }\n\n    return nextNode\n  }\n\n\n  prevNode(node) {\n    let { target, index } = this.index(node, true)\n\n    return target[index - 1] || null\n  }\n\n  prevVisibleNode(node) {\n    let prevNode = this.prevNode(node)\n\n    if (!prevNode) {\n      return node.parent\n    }\n\n    if (prevNode.hasChildren() && prevNode.expanded()) {\n      return prevNode.last()\n    }\n\n    return prevNode\n  }\n\n\n\n  isNode(node) {\n    return node instanceof Node\n  }\n\n\n  findNode(node) {\n    if ('string' == typeof node) {\n      // find by id\n    } else if (node instanceof Node)  {\n      return node\n    }\n  }\n\n\n  parse(data, options) {\n    if (!options) {\n      options = this.options.propertyNames\n    }\n\n    try {\n      return TreeParser.parse(data, this, options)\n    } catch(e) {\n      console.error(e)\n      return []\n    }\n  }\n\n}\n","\nconst keyCodes = {\n  'ARROW_LEFT': 37,\n  'ARROW_TOP': 38,\n  'ARROW_RIGHT': 39,\n  'ARROW_BOTTOM': 40,\n  'SPACE': 32\n}\n\nconst codesArr = [37, 38, 39, 40, 32]\n\n\nfunction focusUp(tree, node) {\n  let prevNode = tree.prevVisibleNode(node)\n\n  if (!prevNode) {\n    return\n  }\n\n  if (prevNode.disabled()) {\n    return focusUp(tree, prevNode)\n  }\n\n  prevNode.focus()\n}\n\nfunction focusdDown(tree, node) {\n  let nextNode = tree.nextVisibleNode(node)\n\n  if (!nextNode) {\n    return\n  }\n\n  if (nextNode.disabled()) {\n    return focusdDown(tree, nextNode)\n  }\n\n  nextNode.focus()\n}\n\nfunction checkNode(tree, node) {\n  if (node.checked()) {\n    tree.uncheck(node)\n  } else {\n    tree.check(node)\n  }\n}\n\n\nexport default function(tree) {\n  const vm = tree.vm\n  const $el = vm.$el\n\n  $el.addEventListener('keydown', e => {\n    let code = e.keyCode\n    let node = tree.activeElement\n\n    if (!tree.isNode(node)) {\n      return\n    }\n\n    if (codesArr.includes(code)) {\n      e.preventDefault()\n      e.stopPropagation()\n    }\n\n    switch(code) {\n      case keyCodes.ARROW_LEFT: return node.collapse()\n      case keyCodes.ARROW_RIGHT: return node.expand()\n      case keyCodes.ARROW_TOP: return focusUp(tree, node)\n      case keyCodes.ARROW_BOTTOM: return focusdDown(tree, node)\n      case keyCodes.SPACE: return checkNode(tree, node)\n    }\n  }, true)\n\n};\n","import Tree from '@/lib/Tree'\nimport initKeyboardNavigation from '@/utils/keyboardNavigation'\n\n\nexport default {\n  mounted() {\n    const tree = new Tree(this)\n\n    this.model = tree.parse(this.data, this.options.modelParse)\n\n    this.tree = tree\n    this.tree.setModel(this.model)\n\n    this._provided.tree = tree\n\n    initKeyboardNavigation(tree)\n  },\n\n  methods: {\n    selected() {\n      if (this.options.multiple) {\n        return this.tree.selectedNodes\n      }\n\n      return this.tree.selectedNodes[0] || null\n    },\n\n    checked() {\n      if (!this.options.checkbox) {\n        return null\n      }\n\n      return this.tree.checkedNodes\n    },\n\n    append(node) {\n      return this.tree.append(node)\n    },\n\n    prepend(node) {\n      return this.tree.prepend(node)\n    },\n\n    addNode(node) {\n      return this.tree.addNode(node)\n    }\n  }\n\n};\n","<template>\n  <div class=\"tree\" role=\"tree\">\n    <ul class=\"tree-root\">\n      <node\n        v-for=\"(node, i) in model\"\n        v-if=\"node.visible()\"\n\n        :key=\"node.id\"\n        :node=\"node\"\n        :options=\"options\"\n      />\n    </ul>\n  </div>\n</template>\n\n<script>\n  import TreeNode from '@/components/TreeNode'\n  import TreeMixin from '@/mixins/TreeMixin'\n  import Tree from '@/lib/Tree'\n\n  const defaults = {\n    multiple: true,\n    checkbox: false,\n    parentSelect: false\n  }\n\n  export default {\n    name: 'Tree',\n    components: {\n      'node': TreeNode\n    },\n\n    mixins: [TreeMixin],\n\n    provide: _ => ({\n      tree: null\n    }),\n\n    props: {\n      data: {\n        type: Array,\n        default: _ => []\n      },\n\n      options: {\n        type: Object,\n        default: _ => ({})\n      }\n    },\n\n    data() {\n      // we should not mutating a prop directly...\n      // that's why we add if it necessary\n      for (let prop in defaults) {\n        if ( false === (prop in this.options) ) {\n          this.options[prop] = defaults[prop]\n        }\n      }\n\n      return {\n        model: null,\n        tree: null\n      }\n    }\n  }\n</script>\n\n<style>\n  .tree {\n    overflow: auto;\n  }\n\n  .tree-root,\n  .tree-children {\n    list-style: none;\n  }\n\n  .tree > .tree-root {\n    padding: 0;\n  }\n</style>\n","import TreeRoot from '@/components/TreeRoot'\n\nconst install = Vue => {\n  Vue.component(TreeRoot.name, TreeRoot)\n}\n\nTreeRoot.install = install\n\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use(TreeRoot)\n}\n\nexport default TreeRoot\n"],"names":["const","let","super","this"],"mappings":"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"}